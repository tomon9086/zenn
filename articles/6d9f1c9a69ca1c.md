---
title: "mapbox_glã®Androidå¯¾å¿œ"
emoji: "ğŸ "
type: "tech"
topics:
  - "android"
  - "flutter"
  - "mapbox"
published: true
published_at: "2021-09-05 13:33"
---

MapBoxã®Flutterå‘ã‘éå…¬å¼ãƒ©ã‚¤ãƒ–ãƒ©ãƒª `mapbox_gl` ã®masteræœ€æ–°ã‚³ãƒŸãƒƒãƒˆ (`f90d54`) ã‚’Androidã§å‹•ã‹ã—ãŸã¨ãã®è¨­å®šãƒ¡ãƒ¢ã§ã™ã€‚

iOSã§ã®è¨­å®šã¤ã¾ã¥ããƒã‚¤ãƒ³ãƒˆã¯[ã“ã¡ã‚‰](https://zenn.dev/tomon9086/articles/ac252b9737d2a3)ã€‚

# ãƒ“ãƒ«ãƒ‰æ™‚
## gradleã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ `6.3` ã«ä¸Šã’ã‚‹
`Could not initialize class org.codehaus.groovy.runtime.InvokerHelper` ã¿ãŸã„ãªã‚¨ãƒ©ãƒ¼ã‚’æ½°ã™ã€‚
```diff properties:android/gradle/wrapper/gradle-wrapper.properties
  distributionBase=GRADLE_USER_HOME
  distributionPath=wrapper/dists
  zipStoreBase=GRADLE_USER_HOME
  zipStorePath=wrapper/dists
- distributionUrl=https\://services.gradle.org/distributions/gradle-5.6.2-all.zip
+ distributionUrl=https\://services.gradle.org/distributions/gradle-6.3-all.zip
```

## minSdkVersionã‚’ `20` ã«ä¸Šã’ã‚‹
`minSdkVersion 16 cannot be smaller than version 20 declared in library` ã¨è¨€ã‚ã‚Œã‚‹ã®ã§å¾“ã†ã€‚
```diff gradle:android/app/build.gradle
  android {
	ï¸™
      defaultConfig {
	    ï¸™
-         minSdkVersion 16
+         minSdkVersion 20
	    ï¸™
      }
  }
```

## Registry tokenã‚’è¨­å®šã™ã‚‹
`SDK Registry token is null. See README.md for more information.` ã¨è¨€ã‚ã‚Œã‚‹ã€‚
Registry tokenã¨ã¯ãŠãã‚‰ãã€`mapbox_gl` ãŒå†…éƒ¨ã§ä½¿ã£ã¦ã„ã‚‹MapBox SDKã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã«ä½¿ã†ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³ã®ã“ã¨ã€‚ã“ã‚ŒãŒãªã„ã¨403ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„ç¾è±¡ã‚’iOSã§è¦‹ãŸ (ãã‚Œã¯ `~/netrc` ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç½®ã„ã¦è§£æ±ºã—ãŸã®ã«Androidã¯ç„¡ç†ãªã®ã‹ï¼Ÿ)ã€‚
	
ç’°å¢ƒå¤‰æ•°ã« `SDK_REGISTRY_TOKEN` ã‚’è¨­å®šã§ãã‚Œã°ã©ã‚“ãªæ‰‹æ®µã§ã‚‚è‰¯ã„ã€‚
VSCodeãªã‚‰ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®šãŒä¾¿åˆ©ãã†ã€‚
```json:.vscode/settings.json
{
  "dart.env": {
    "SDK_REGISTRY_TOKEN": "YOUR_TOKEN_HERE"
  }
}
```

# å®Ÿè¡Œæ™‚
## ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¸¡ã™
`Failed to find an Access Token in the Application meta-data.` ã¨è¨€ã‚ã‚Œã‚‹ã€‚

ã“ã‚Œã‚‚ `MapboxMap` Widgetã®initializerã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã‚Œã°ã©ã‚“ãªæ‰‹æ®µã§ã‚‚è‰¯ã„ãŒã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ãƒ™ã‚¿æ›¸ãã—ã¦ã‚³ãƒŸãƒƒãƒˆã—ã¦ã—ã¾ã†ã®ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã«è¨­å®šã—ãŸæ¨©é™ã«ã‚ˆã£ã¦ã¯å•é¡Œã‹ã‚‚ã—ã‚Œãªã„ã®ã§ã€ç’°å¢ƒå¤‰æ•°ã‹ä½•ã‹ã‚’ä»‹ã—ã¦æ¸¡ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ãŒè‰¯ã„ã¨æ€ã†ã€‚
[flutter_dotenv](https://pub.dev/packages/flutter_dotenv) ãŒä¾¿åˆ©ãã†ã€‚